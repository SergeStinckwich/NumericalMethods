%\newcounter{listing}[chapter]
%\def\beglisting#1#2{\addtocounter{listing}{1}\vskip 1em\hrule\vskip 0.5em \noindent Listing \thelisting :
%#1\def#2\thelisting}
%\def\endlisting{\hrule\vskip 1em}


\newtheorem{listing}{Listing}[chapter]
